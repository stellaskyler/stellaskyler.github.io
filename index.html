<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mastermind</title>
    <meta name="theme-color" content="#2563eb" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <link rel="manifest" href="manifest.json" />
    <link rel="icon" href="icon.svg" type="image/svg+xml" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="app">
      <header class="app__header">
        <div>
          <h1>Mastermind</h1>
          <p class="subtitle">Crack the code in 10 turns.</p>
        </div>
        <div id="header-actions" class="header__actions" hidden>
          <button id="nav-home" class="button button--ghost">Home</button>
          <button id="how-to" class="button button--ghost js-how-to">How to play</button>
          <button id="new-game" class="button">New Game</button>
        </div>
      </header>

      <main>
        <section id="screen-home" class="screen">
          <div class="panel">
            <section class="panel__section">
              <h2>Home</h2>
              <p id="resume-status" class="subtitle">Start a new puzzle or continue your last game.</p>
              <div class="controls">
                <button id="resume-game" class="button">Play / Resume</button>
                <button id="home-new-game" class="button button--ghost">New Game</button>
              </div>
              <div class="controls">
                <button id="open-settings" class="button button--ghost">Settings</button>
                <button id="open-stats" class="button button--ghost">Stats</button>
                <button id="open-how-to" class="button button--ghost js-how-to">How to Play</button>
              </div>
            </section>
          </div>
        </section>

        <section id="screen-game" class="screen" hidden>
          <main class="layout">
            <section class="board" aria-live="polite" aria-label="Game board">
              <div id="board" class="board__rows"></div>
              <div class="board__reveal" id="reveal" aria-live="polite">
                <span class="reveal__label">Secret</span>
                <div class="reveal__pegs" id="reveal-pegs"></div>
                <span id="status-message" class="reveal__message"></span>
              </div>
            </section>

            <aside class="panel">
              <section class="panel__section">
                <h2>Status</h2>
                <div class="options">
                  <div>
                    <strong>Timer</strong>
                    <div id="timer-value" class="subtitle">Off</div>
                  </div>
                  <div>
                    <strong>Row</strong>
                    <div id="row-counter" class="subtitle"></div>
                  </div>
                </div>
              </section>

              <section class="panel__section palette-panel">
                <h2>Palette</h2>
                <div id="palette" class="palette" role="group" aria-label="Color palette"></div>
              </section>
              <section class="panel__section">
                <h2>Difficulty</h2>
                <div class="options">
                  <div class="option-group">
                    <span class="option-group__label">Code length</span>
                    <div
                      id="code-length"
                      class="option-group__controls"
                      role="radiogroup"
                      aria-label="Code length"
                    >
                      <label class="option-pill">
                        <input type="radio" name="code-length" value="4" checked />
                        <span>4</span>
                      </label>
                      <label class="option-pill">
                        <input type="radio" name="code-length" value="5" />
                        <span>5</span>
                      </label>
                    </div>
                  </div>
                  <div class="option-group">
                    <span class="option-group__label">Palette size</span>
                    <div
                      id="palette-size"
                      class="option-group__controls"
                      role="radiogroup"
                      aria-label="Palette size"
                    >
                      <label class="option-pill">
                        <input type="radio" name="palette-size" value="6" checked />
                        <span>6</span>
                      </label>
                      <label class="option-pill">
                        <input type="radio" name="palette-size" value="8" />
                        <span>8</span>
                      </label>
                    </div>
                  </div>
                  <label class="toggle">
                    <input id="allow-duplicates" type="checkbox" checked />
                    Allow duplicates
                  </label>
                  <label class="toggle">
                    <input id="sound-toggle" type="checkbox" />
                    <span id="sound-label">Sound (off)</span>
                  </label>
                  <label class="toggle">
                    <input id="haptics-toggle" type="checkbox" />
                    <span id="haptics-label">Haptics (off)</span>
                  </label>
                </div>
              </section>

              <section class="panel__section">
                <h2>Controls</h2>
                <div class="controls">
                  <button id="erase" class="button button--ghost">Erase</button>
                  <button id="submit" class="button" disabled>Submit Guess</button>
                </div>
              </section>

              <section class="panel__section">
                <h2>Tips</h2>
                <ul class="tips">
                  <li>Blacks = correct color &amp; position.</li>
                  <li>Whites = correct color, wrong position.</li>
                  <li>Use number keys 1-8 for quick entry.</li>
                  <li>Tap a palette color to auto-fill the next slot.</li>
                  <li>Tap a slot to open the color picker.</li>
                </ul>
              </section>
            </aside>
          </main>
        </section>

        <section id="screen-settings" class="screen" hidden>
          <div class="panel">
            <section class="panel__section">
              <h2>Settings</h2>
              <div class="options">
                <div class="option-group">
                  <span class="option-group__label">Code length</span>
                  <div
                    id="settings-code-length"
                    class="option-group__controls"
                    role="radiogroup"
                    aria-label="Code length"
                  >
                    <label class="option-pill">
                      <input type="radio" name="settings-code-length" value="4" checked />
                      <span>4</span>
                    </label>
                    <label class="option-pill">
                      <input type="radio" name="settings-code-length" value="5" />
                      <span>5</span>
                    </label>
                  </div>
                </div>
                <div class="option-group">
                  <span class="option-group__label">Palette size</span>
                  <div
                    id="settings-palette-size"
                    class="option-group__controls"
                    role="radiogroup"
                    aria-label="Palette size"
                  >
                    <label class="option-pill">
                      <input type="radio" name="settings-palette-size" value="6" checked />
                      <span>6</span>
                    </label>
                    <label class="option-pill">
                      <input type="radio" name="settings-palette-size" value="8" />
                      <span>8</span>
                    </label>
                  </div>
                </div>
                <label>
                  Max rows
                  <input id="settings-max-rows" type="number" min="6" max="14" step="1" />
                </label>
                <label class="toggle">
                  <input id="settings-allow-duplicates" type="checkbox" />
                  Allow duplicates
                </label>
              </div>
            </section>

            <section class="panel__section">
              <h2>Accessibility</h2>
              <div class="options">
                <label class="toggle">
                  <input id="settings-high-contrast" type="checkbox" />
                  High contrast
                </label>
                <label class="toggle">
                  <input id="settings-large-text" type="checkbox" />
                  Larger text
                </label>
                <label class="toggle">
                  <input id="settings-reduced-motion" type="checkbox" />
                  Reduced motion
                </label>
              </div>
            </section>

            <section class="panel__section">
              <h2>Feedback</h2>
              <div class="options">
                <label class="toggle">
                  <input id="settings-sound-toggle" type="checkbox" />
                  <span id="settings-sound-label">Sound (off)</span>
                </label>
                <label class="toggle">
                  <input id="settings-haptics" type="checkbox" />
                  Haptics
                </label>
              </div>
            </section>

            <section class="panel__section">
              <h2>Timer</h2>
              <div class="options">
                <label class="toggle">
                  <input id="settings-timer-enabled" type="checkbox" />
                  Enable timer
                </label>
                <label>
                  Duration (seconds)
                  <input id="settings-timer-seconds" type="number" min="60" max="1800" step="30" />
                </label>
              </div>
              <p class="subtitle">Settings apply to new games.</p>
              <div class="controls">
                <button id="save-settings" class="button">Save Settings</button>
                <button id="settings-new-game" class="button button--ghost">Start New Game</button>
              </div>
            </section>
          </div>
        </section>

        <section id="screen-stats" class="screen" hidden>
          <div class="panel">
            <section class="panel__section">
              <h2>Stats</h2>
              <div class="options">
                <div>
                  <strong>Games played</strong>
                  <div id="stats-games" class="subtitle">0</div>
                </div>
                <div>
                  <strong>Wins</strong>
                  <div id="stats-wins" class="subtitle">0</div>
                </div>
                <div>
                  <strong>Losses</strong>
                  <div id="stats-losses" class="subtitle">0</div>
                </div>
                <div>
                  <strong>Win rate</strong>
                  <div id="stats-win-rate" class="subtitle">0%</div>
                </div>
                <div>
                  <strong>Current streak</strong>
                  <div id="stats-current-streak" class="subtitle">0</div>
                </div>
                <div>
                  <strong>Best streak</strong>
                  <div id="stats-best-streak" class="subtitle">0</div>
                </div>
                <div>
                  <strong>Best solve</strong>
                  <div id="stats-best-turns" class="subtitle">-</div>
                </div>
                <div>
                  <strong>Average turns</strong>
                  <div id="stats-average-turns" class="subtitle">-</div>
                </div>
              </div>
            </section>
          </div>
        </section>
      </main>
    </div>

    <div id="modal" class="modal" aria-hidden="true">
      <div class="modal__content" role="dialog" aria-modal="true" aria-labelledby="modal-title">
        <header class="modal__header">
          <h2 id="modal-title">How to play</h2>
          <button id="modal-close" class="button button--ghost" aria-label="Close">✕</button>
        </header>
        <div class="modal__body">
          <p>Guess the hidden code before the turns run out.</p>
          <ul>
            <li>Tap a color in the palette to auto-fill the next slot.</li>
            <li>Tap a slot to open a color picker.</li>
            <li>Submit to see black and white key pegs.</li>
            <li>Black means right color in the right spot.</li>
            <li>White means the color exists elsewhere.</li>
          </ul>
          <p>Press ESC to close this dialog.</p>
        </div>
      </div>
    </div>

    <div id="color-modal" class="modal" aria-hidden="true">
      <div
        class="modal__content modal__content--compact"
        role="dialog"
        aria-modal="true"
        aria-labelledby="color-modal-title"
      >
        <header class="modal__header">
          <h2 id="color-modal-title">Pick a color</h2>
          <button id="color-modal-close" class="button button--ghost" aria-label="Close">✕</button>
        </header>
        <div class="modal__body">
          <div
            id="color-picker"
            class="palette palette--modal"
            role="group"
            aria-label="Slot color picker"
          ></div>
        </div>
      </div>
    </div>

    <script type="module" src="app.js"></script>
  </body>
</html>
